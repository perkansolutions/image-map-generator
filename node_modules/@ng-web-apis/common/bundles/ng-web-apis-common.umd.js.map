{"version":3,"file":"ng-web-apis-common.umd.js","sources":["../../../libs/common/src/tokens/window.ts","../../../libs/common/src/tokens/animation-frame.ts","../../../libs/common/src/tokens/caches.ts","../../../libs/common/src/tokens/crypto.ts","../../../libs/common/src/tokens/css.ts","../../../libs/common/src/tokens/history.ts","../../../libs/common/src/tokens/local-storage.ts","../../../libs/common/src/tokens/location.ts","../../../libs/common/src/tokens/navigator.ts","../../../libs/common/src/tokens/media-devices.ts","../../../libs/common/src/tokens/network-information.ts","../../../libs/common/src/tokens/page-visibility.ts","../../../libs/common/src/tokens/performance.ts","../../../libs/common/src/tokens/screen.ts","../../../libs/common/src/tokens/session-storage.ts","../../../libs/common/src/tokens/speech-recognition.ts","../../../libs/common/src/tokens/speech-synthesis.ts","../../../libs/common/src/tokens/user-agent.ts","../../../libs/common/src/ng-web-apis-common.ts"],"sourcesContent":["import {DOCUMENT} from '@angular/common';\nimport {inject, InjectionToken} from '@angular/core';\n\nexport const WINDOW = new InjectionToken<Window>(\n    'An abstraction over global window object',\n    {\n        factory: () => {\n            const {defaultView} = inject(DOCUMENT);\n\n            if (!defaultView) {\n                throw new Error('Window is not available');\n            }\n\n            return defaultView;\n        },\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {share} from 'rxjs/operators';\n\nimport {WINDOW} from './window';\n\nexport const ANIMATION_FRAME = new InjectionToken<Observable<DOMHighResTimeStamp>>(\n    'Shared Observable based on `window.requestAnimationFrame`',\n    {\n        factory: () => {\n            const {requestAnimationFrame, cancelAnimationFrame} = inject(WINDOW);\n            const animationFrame$ = new Observable<DOMHighResTimeStamp>(subscriber => {\n                let id = NaN;\n                const callback = (timestamp: DOMHighResTimeStamp) => {\n                    subscriber.next(timestamp);\n                    id = requestAnimationFrame(callback);\n                };\n\n                id = requestAnimationFrame(callback);\n\n                return () => {\n                    cancelAnimationFrame(id);\n                };\n            });\n\n            return animationFrame$.pipe(share());\n        },\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const CACHES = new InjectionToken<CacheStorage>(\n    'An abstraction over window.caches object',\n    {\n        factory: () => inject(WINDOW).caches,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const CRYPTO = new InjectionToken<Crypto>(\n    'An abstraction over window.crypto object',\n    {\n        factory: () => inject(WINDOW).crypto,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\n/**\n * Use Window['CSS'], this is a workaround to support Angular 6+\n */\ninterface Css {\n    escape(ident: string): string;\n    supports(property: string, value: string): boolean;\n    supports(conditionText: string): boolean;\n}\n\nexport const CSS = new InjectionToken<Css>('An abstraction over window.CSS object', {\n    factory: () =>\n        (inject(WINDOW) as any).CSS || {\n            escape: v => v,\n            supports: () => false,\n        },\n});\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const HISTORY = new InjectionToken<History>(\n    'An abstraction over window.history object',\n    {\n        factory: () => inject(WINDOW).history,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const LOCAL_STORAGE = new InjectionToken<Storage>(\n    'An abstraction over window.localStorage object',\n    {\n        factory: () => inject(WINDOW).localStorage,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const LOCATION = new InjectionToken<Location>(\n    'An abstraction over window.location object',\n    {\n        factory: () => inject(WINDOW).location,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const NAVIGATOR = new InjectionToken<Navigator>(\n    'An abstraction over window.navigator object',\n    {\n        factory: () => inject(WINDOW).navigator,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {NAVIGATOR} from './navigator';\n\nexport const MEDIA_DEVICES = new InjectionToken<MediaDevices>(\n    'An abstraction over window.navigator.mediaDevices object',\n    {\n        factory: () => inject(NAVIGATOR).mediaDevices,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {NAVIGATOR} from './navigator';\n\nexport const NETWORK_INFORMATION = new InjectionToken<\n    // @ts-ignore\n    (typeof navigator)['connection'] | null\n>('An abstraction over window.navigator.connection object', {\n    // @ts-ignore\n    factory: () => inject(NAVIGATOR).connection || null,\n});\n","import {DOCUMENT} from '@angular/common';\nimport {inject, InjectionToken} from '@angular/core';\nimport {fromEvent, Observable} from 'rxjs';\nimport {distinctUntilChanged, map, shareReplay, startWith} from 'rxjs/operators';\n\nexport const PAGE_VISIBILITY = new InjectionToken<Observable<boolean>>(\n    'Shared Observable based on `document visibility changed`',\n    {\n        factory: () => {\n            const documentRef = inject(DOCUMENT);\n\n            return fromEvent(documentRef, 'visibilitychange').pipe(\n                startWith(0),\n                map(() => documentRef.visibilityState !== 'hidden'),\n                distinctUntilChanged(),\n                shareReplay({refCount: false, bufferSize: 1}),\n            );\n        },\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const PERFORMANCE = new InjectionToken<Performance>(\n    'An abstraction over window.performance object',\n    {\n        factory: () => inject(WINDOW).performance,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const SCREEN = new InjectionToken<Screen>(\n    'An abstraction over window.screen object',\n    {\n        factory: () => inject(WINDOW).screen,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const SESSION_STORAGE = new InjectionToken<Storage>(\n    'An abstraction over window.sessionStorage object',\n    {\n        factory: () => inject(WINDOW).sessionStorage,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const SPEECH_RECOGNITION = new InjectionToken<\n    // @ts-ignore\n    (typeof window)['speechRecognition'] | null\n>('An abstraction over SpeechRecognition class', {\n    factory: () => {\n        const windowRef: any = inject(WINDOW);\n\n        return windowRef.speechRecognition || windowRef.webkitSpeechRecognition || null;\n    },\n});\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {WINDOW} from './window';\n\nexport const SPEECH_SYNTHESIS = new InjectionToken<SpeechSynthesis>(\n    'An abstraction over window.speechSynthesis object',\n    {\n        factory: () => inject(WINDOW).speechSynthesis,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\n\nimport {NAVIGATOR} from './navigator';\n\nexport const USER_AGENT = new InjectionToken<string>(\n    'An abstraction over window.navigator.userAgent object',\n    {\n        factory: () => inject(NAVIGATOR).userAgent,\n    },\n);\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["InjectionToken","inject","DOCUMENT","Observable","share","fromEvent","startWith","map","distinctUntilChanged","shareReplay"],"mappings":"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"}
{"version":3,"file":"ng-web-apis-resize-observer.js","sources":["../../../libs/resize-observer/src/tokens/resize-option-box.ts","../../../libs/resize-observer/src/tokens/support.ts","../../../libs/resize-observer/src/services/resize-observer.service.ts","../../../libs/resize-observer/src/directives/resize-observer.directive.ts","../../../libs/resize-observer/src/module.ts","../../../libs/resize-observer/src/index.ts","../../../libs/resize-observer/src/ng-web-apis-resize-observer.ts"],"sourcesContent":["import {InjectionToken} from '@angular/core';\n\nexport const RESIZE_OPTION_BOX_DEFAULT = 'content-box';\n\nexport const RESIZE_OPTION_BOX = new InjectionToken<ResizeObserverBoxOptions>(\n    'Box model to observe changes',\n    {\n        providedIn: 'root',\n        factory: () => RESIZE_OPTION_BOX_DEFAULT,\n    },\n);\n","import {inject, InjectionToken} from '@angular/core';\nimport {WINDOW} from '@ng-web-apis/common';\n\nexport const RESIZE_OBSERVER_SUPPORT = new InjectionToken<boolean>(\n    'Resize Observer API support',\n    {\n        providedIn: 'root',\n        factory: () => !!(inject(WINDOW) as any).ResizeObserver,\n    },\n);\n","import {ElementRef, Inject, Injectable, NgZone} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {share} from 'rxjs/operators';\n\nimport {RESIZE_OPTION_BOX} from '../tokens/resize-option-box';\nimport {RESIZE_OBSERVER_SUPPORT} from '../tokens/support';\n\n@Injectable()\nexport class ResizeObserverService extends Observable<readonly ResizeObserverEntry[]> {\n    constructor(\n        @Inject(ElementRef) {nativeElement}: ElementRef<Element>,\n        @Inject(NgZone) ngZone: NgZone,\n        @Inject(RESIZE_OBSERVER_SUPPORT) support: boolean,\n        @Inject(RESIZE_OPTION_BOX) box: ResizeObserverBoxOptions,\n    ) {\n        let observer: ResizeObserver;\n\n        super(subscriber => {\n            if (!support) {\n                subscriber.error('ResizeObserver is not supported in your browser');\n\n                return;\n            }\n\n            observer = new ResizeObserver(entries => {\n                ngZone.run(() => {\n                    subscriber.next(entries);\n                });\n            });\n            observer.observe(nativeElement, {box});\n\n            return () => {\n                observer.disconnect();\n            };\n        });\n\n        return this.pipe(share());\n    }\n}\n","import {Attribute, Directive, ElementRef, Inject} from '@angular/core';\nimport {Observable} from 'rxjs';\n\nimport {ResizeObserverService} from '../services/resize-observer.service';\nimport {RESIZE_OPTION_BOX, RESIZE_OPTION_BOX_DEFAULT} from '../tokens/resize-option-box';\n\n/**\n * @deprecated View Engine legacy\n * TODO: use arrow function for `useFactory` and delete this exported function in future major release\n */\n// TODO switch to Attribute once https://github.com/angular/angular/issues/36479 is fixed\nexport function boxExtractor({\n    nativeElement,\n}: ElementRef<Element>): ResizeObserverBoxOptions {\n    const attribute = nativeElement.getAttribute(\n        'waResizeBox',\n    ) as ResizeObserverBoxOptions;\n\n    return boxFactory(attribute);\n}\n\n/**\n * @deprecated View Engine legacy\n * TODO: use arrow function for `useFactory` and delete this exported function in future major release\n */\nexport function boxFactory(\n    box: ResizeObserverBoxOptions | null,\n): ResizeObserverBoxOptions {\n    return box || RESIZE_OPTION_BOX_DEFAULT;\n}\n\n@Directive({\n    selector: '[waResizeObserver]',\n    outputs: ['waResizeObserver'],\n    providers: [\n        ResizeObserverService,\n        {\n            provide: RESIZE_OPTION_BOX,\n            deps: [ElementRef],\n            useFactory: boxExtractor,\n        },\n    ],\n})\nexport class ResizeObserverDirective {\n    constructor(\n        @Inject(ResizeObserverService)\n        readonly waResizeObserver: Observable<ResizeObserverEntry[]>,\n        @Attribute('waResizeBox') _box: ResizeObserverBoxOptions,\n    ) {}\n}\n","import {NgModule} from '@angular/core';\nimport {ResizeObserverDirective} from './directives/resize-observer.directive';\n\n@NgModule({\n    declarations: [ResizeObserverDirective],\n    exports: [ResizeObserverDirective],\n})\nexport class ResizeObserverModule {}\n","/**\n * Public API Surface of @ng-web-apis/resize-observer\n */\n\n/* Directives */\nexport * from './directives/resize-observer.directive';\n\n/* Modules */\nexport * from './module';\n\n/* Services */\nexport * from './services/resize-observer.service';\n\n/* Tokens */\nexport * from './tokens/resize-option-box';\nexport * from './tokens/support';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}